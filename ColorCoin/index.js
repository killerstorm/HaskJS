var ckernel = require ('./main.js')
const bc = require('bitcoinjs-lib');
var Transaction = bc.Transaction;
var crypt = require('crypto');
var buftools = require('buffertools').extend();


function encrypt(tx) {
    sha256.update(tx, 'hex');
    return sha256.digest('hex');
}


var tx = Transaction.fromHex('0100000001993a052baad64bccccb3c32f1603e95457949c33208052ba6893a1c8fc3bfadb000000006b483045022100d38cd30a2b34275b1f4054d56e7ab35a87cc0cd83e7ae4747e641fd696f4b764022076017c72dab2cef85016330d2a1798c5820955708adfcb23410caef92d3b58c40121022539abaecacca3e643bdadfd5f34f52e39fc1c5d6863536fb987d37999a55cdeffffffff0458020000000000001976a914cadeb078e53c27c75e3e1d9e6399ef90cafc456b88ac0000000000000000096a074f410100010900104e3800000000001976a9148e9c9a0187f0da5c69f4d7d35cf40e862e14653a88ac28180600000000001976a914cadeb078e53c27c75e3e1d9e6399ef90cafc456b88ac00000000');

var tx2 = Transaction.fromHex('01000000010000000000000000000000000000000000000000000000000000000000000000ffffffff4d04ffff001d0104455468652054696d65732030332f4a616e2f32303039204368616e63656c6c6f72206f6e206272696e6b206f66207365636f6e64206261696c6f757420666f722062616e6b73ffffffff0100f2052a01000000434104678afdb0fe5548271967f1a67130b7105cd6a828e03909a67962e0ea1f61deb649f6bc3f4cef38c4f35504e51ec112de5c384df7ba0b8d578a4c702b6bf11d5fac00000000');

var array = [];
array[0] = tx;
array[1] = tx2;
console.log(ckernel.run_coin_kernel_on_graph("runCoinKernelOnGraph", array));
console.log(ckernel.get_payload(tx2));
console.log(ckernel.get_mux_shape("getMuxShape", ckernel.get_payload(tx2)));


